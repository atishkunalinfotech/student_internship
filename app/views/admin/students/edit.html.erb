<%#= javascript_include_tag "application" %>
<div class="faq">
<div class="container">
<div class="row" style="margin-top:150px;">
<div class="span12">
 <p>
   <%= link_to_function "Back", "history.back()",:class=> "back-btn" %>
 </p>
<h1>Edit Student Profile</h1>
<%#= render 'form' %>
<%# if params[:student_id].present?%>
  <%= form_for [:admin,@student]  do |f| %>
    <% if @student.errors.any? %>
      <div id="error_explanation">
  	  <ul>
  	   <%  @student.errors.full_messages.each do |msg| %>
  	     <li><%= msg %></li>
  	   <% end %>
  	  </ul>
      </div>
    <% end %>
    <table width="100%" border="0" class="table table-bordered table-striped">
      <thead></thead>
      <tbody>
        <tr>
          <td><strong><span style="color: Red;">*</span><%= "First Name" %></strong></td>
          <td><%= f.text_field :student_firstname,required: true %></td>
          <td><strong><span style="color: Red;">*</span><%= "Last Name"  %></strong></td>
          <td><%= f.text_field :student_lastname,required: true %></td>
        </tr>

        <tr>
          <td><strong><span style="color: Red;">*</span><%= "Telephone"  %></strong></td>
          <td><%= f.text_field :telephone,required: true %></td>
          <td><strong><span style="color: Red;">*</span><%= "Email"  %></strong></td>
          <td><%= f.text_field :email,:value=> @student.email, :disabled => true,required: true%></td>
        </tr>
        <tr>

          <td><strong><span style="color: Red;">*</span><%= "Status"  %></strong></td>
          <td><%= f.select :status, [ ["International", "International"],["Permanent Resident/Citizen", "Permanent Resident/Citizen"] ],{:include_blank=>"Select One",:selected => "#{@student.status rescue nil}"} ,:required =>true%></td>
           
          <td><strong><span style="color: Red;">*</span><%= "Gender"  %></strong></td>
          <td><%= f.select :gender, [ ["Male", "Male"],["Female", "Female"] ],{:include_blank=>"Select One",:selected => "#{@student.gender rescue nil}"} ,:required =>true%></td>
        </tr> 

        <tr>
          <td><strong><span style="color: Red;">*</span><%= "Semester"  %></strong></td>
          <td><%= select_tag(:semester, options_for_select([["Fall", "Fall"],["Winter", "Winter"]],:selected => "#{@student.semester_registereds.where('student_id = ?', @student.id).first.semester}", :include_blank => true)) %></td>
          <%#raise @student.semester_registereds.where('student_id = ?', @student.id).first.semester.inspect%>
          <td><strong><span style="color: Red;">*</span><%= "Country"  %></strong></td>
          <td><%= f.country_select :country, selected: @student.country %></td>
        </tr> 

        <tr>
          <td><strong><span style="color: Red;">* </span><%= "Year"  %></strong></td>
          <td><%= date_field_tag :year, "", :value => @semester[0].student_year %></td>
          <td><strong><span style="color: Red;">*</span><%= "Resume"  %></strong></td>
          <td>
            <%= f.file_field :attachment%>
            <%if @student.attachment.present? %>
              <%= link_to "#{@student.attachment.file.filename}", @student.attachment_url %>
            <%end%>
          </td>
        </tr>  
      </tbody>
    </table>
    <%= f.fields_for :educations do |builder| %>
      <%= render 'education_fields', f: builder %>
    <% end %>
    <%= link_to_add_fields "Add Education", f, :educations %>
    <%#= f.hidden_field :student_profile , :value => "student_profile"%>
    <%#= f.hidden_field :student_id , :value => params[:student_id]%>

    <%# end %>
    <div ></div><br>

    <div class="actions">
      <%= f.submit %><br>
    </div>

  <% end %>

  <script type="text/javascript">
      jQuery.noConflict();
      jQuery(function($){
        jQuery("#year").datepicker({
          changeYear: true,
          showButtonPanel: true,
          dateFormat: 'yy',
          beforeShowDay: jQuery.datepicker.nodates,
          onClose: function(dateText, inst) { 
              var year = jQuery("#ui-datepicker-div .ui-datepicker-year :selected").val();
              jQuery(this).datepicker('setDate', new Date(year, 1));
          }
      });

      jQuery("#year").focus(function () {
          jQuery(".ui-datepicker-month").hide();
          jQuery(".ui-datepicker-calendar").hide();
          jQuery(".ui-datepicker-current").hide();
      });

      });
  </script>

  <script type="text/javascript">
    jQuery.noConflict();
    jQuery(function($){
      jQuery("#dates_start").datepicker({dateFormat: 'dd-mm-yy',changeMonth: true,
    changeYear: true})

    });
    jQuery.noConflict();
    jQuery(function($){
      jQuery("#date_end").datepicker({dateFormat: 'dd-mm-yy ',changeMonth: true,
    changeYear: true})
    });
</script>

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(function($){
      jQuery("#dates_start1").datepicker({dateFormat: 'dd-mm-yy',changeMonth: true,
    changeYear: true})

    });
    jQuery.noConflict();
    jQuery(function($){
      jQuery("#date_end1").datepicker({dateFormat: 'dd-mm-yy ',changeMonth: true,
    changeYear: true})
    });
</script>
<%#else%>
  <!-- <h1>No Student Present</h1> -->
<%#end%>
</div>
    </div>
  </div>
</div>
